<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Ch∆°i V·ªõi B·∫°n - Bao B√∫a K√©o</title>
    <link rel="stylesheet" href="style/play-with-friends.css" />
  </head>
  <body>
    <button class="back-home" onclick="window.location.href='index.html'">
      ‚Üê
    </button>
    <div class="container">
      <div class="friend-section">
        <div class="search-friend">
          <input
            type="text"
            id="friend-search"
            placeholder="T√¨m ki·∫øm b·∫°n b√®..."
          />
        </div>
        <div class="friend-list" id="friend-list">
          <!-- Danh s√°ch b·∫°n b√® s·∫Ω ƒë∆∞·ª£c render ·ªü ƒë√¢y -->
        </div>
      </div>

      <div class="invite-section">
        <div class="invite-code-section">
          <input
            type="text"
            id="invite-code"
            placeholder="Nh·∫≠p m√£ m·ªùi"
            readonly
          />
          <button class="copy-btn" id="copy-code-btn">Sao Ch√©p</button>
        </div>
      </div>

      <div class="game-modes">
        <button class="game-mode-btn" id="random-mode">Ch∆°i Ng·∫´u Nhi√™n</button>
        <button class="game-mode-btn" id="invite-mode">Ch∆°i V·ªõi B·∫°n B√®</button>
      </div>
    </div>

    <!-- Modal L·ªùi M·ªùi Ch∆°i -->
    <div
      id="invite-modal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
      "
    >
      <div
        style="
          background-color: white;
          padding: 30px;
          border-radius: 10px;
          text-align: center;
        "
      >
        <div class="invite-notification">
          Ng·ªçc Linh ƒë√£ m·ªùi b·∫°n ch∆°i Bao B√∫a K√©o!
        </div>
        <div class="game-invite-btns">
          <button class="invite-game-btn accept-btn">Ch·∫•p Nh·∫≠n</button>
          <button class="invite-game-btn decline-btn">T·ª´ Ch·ªëi</button>
        </div>
      </div>
    </div>

    <script>
      // D·ªØ li·ªáu m·∫´u b·∫°n b√®
      const friendsList = [
        { id: 1, name: "Ng·ªçc Linh", online: true },
        { id: 2, name: "Minh Anh", online: false },
        { id: 3, name: "Ho√†ng Nam", online: true },
      ];

      const friendListElement = document.getElementById("friend-list");
      const friendSearchInput = document.getElementById("friend-search");
      const inviteCodeInput = document.getElementById("invite-code");
      const copyCodeBtn = document.getElementById("copy-code-btn");
      const randomModeBtn = document.getElementById("random-mode");
      const inviteModeBtn = document.getElementById("invite-mode");
      const inviteModal = document.getElementById("invite-modal");

      // Render danh s√°ch b·∫°n b√®
      function renderFriendsList(friends) {
        friendListElement.innerHTML = friends
          .map(
            (friend) => `
                <div class="friend-item">
                    <span>
                        ${friend.name} 
                        ${friend.online ? "üü¢" : "üî¥"}
                    </span>
                    <button 
                        class="invite-btn" 
                        onclick="inviteFriend(${friend.id})"
                        ${!friend.online ? "disabled" : ""}
                    >
                        M·ªùi Ch∆°i
                    </button>
                </div>
            `
          )
          .join("");
      }

      // T√¨m ki·∫øm b·∫°n b√®
      function searchFriends() {
        const searchTerm = friendSearchInput.value.toLowerCase();
        const filteredFriends = friendsList.filter((friend) =>
          friend.name.toLowerCase().includes(searchTerm)
        );
        renderFriendsList(filteredFriends);
      }

      // M·ªùi b·∫°n ch∆°i
      function inviteFriend(friendId) {
        const friend = friendsList.find((f) => f.id === friendId);
        alert(`ƒê√£ g·ª≠i l·ªùi m·ªùi ch∆°i cho ${friend.name}`);

        // Sinh m√£ m·ªùi
        const inviteCode = Math.random()
          .toString(36)
          .substring(2, 8)
          .toUpperCase();
        inviteCodeInput.value = inviteCode;
      }

      // Sao ch√©p m√£ m·ªùi
      copyCodeBtn.addEventListener("click", () => {
        inviteCodeInput.select();
        document.execCommand("copy");
        alert("ƒê√£ sao ch√©p m√£ m·ªùi");
      });

      // Ch·∫ø ƒë·ªô ch∆°i ng·∫´u nhi√™n
      randomModeBtn.addEventListener("click", () => {
        alert("ƒêang t√¨m ƒë·ªëi th·ªß ng·∫´u nhi√™n...");
      });

      // Ch·∫ø ƒë·ªô ch∆°i v·ªõi b·∫°n b√®
      inviteModeBtn.addEventListener("click", () => {
        // Hi·ªÉn th·ªã modal l·ªùi m·ªùi
        inviteModal.style.display = "flex";
      });

      // X·ª≠ l√Ω n√∫t ch·∫•p nh·∫≠n/t·ª´ ch·ªëi l·ªùi m·ªùi
      document.querySelector(".accept-btn").addEventListener("click", () => {
        alert("Ch·∫•p nh·∫≠n l·ªùi m·ªùi ch∆°i");
        inviteModal.style.display = "none";
      });

      document.querySelector(".decline-btn").addEventListener("click", () => {
        alert("T·ª´ ch·ªëi l·ªùi m·ªùi ch∆°i");
        inviteModal.style.display = "none";
      });

      // S·ª± ki·ªán t√¨m ki·∫øm
      friendSearchInput.addEventListener("input", searchFriends);

      // Kh·ªüi t·∫°o ban ƒë·∫ßu
      renderFriendsList(friendsList);
    </script>
  </body>
</html>
